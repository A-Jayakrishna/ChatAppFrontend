{"ast":null,"code":"import ChatMsgBox from './ChatMsgBox';\n\nclass WebSocketComp {\n  static getSocket() {\n    if (!WebSocketComp.instanace) {\n      WebSocketComp.instanace = new WebSocketComp();\n    }\n\n    return WebSocketComp.instanace;\n  }\n\n  constructor() {\n    this.socket = null;\n  }\n\n  connect(url) {\n    this.socket = new WebSocket(`ws://localhost:8000/ws/chat/${url}/`);\n\n    this.socket.onopen = () => {\n      console.log(\"Connection established...\");\n    };\n\n    this.socket.onmessage = e => {\n      this.update(JSON.parse(e.data));\n    };\n\n    this.socket.onclose = () => {\n      console.log(\"Byyee...\");\n    };\n  }\n\n  update(msg) {\n    ChatMsgBox.update(msg.msg);\n  }\n\n  disconnect() {\n    this.socket.close();\n  }\n\n  sendMsg(msg) {\n    this.socket.send(JSON.stringify({\n      'msg': msg\n    }));\n  }\n\n}\n\nWebSocketComp.instanace = null;\nconst conn = WebSocketComp.getSocket();\nexport default conn;","map":{"version":3,"sources":["C:/Users/ajaik/Desktop/phase2/communication/ChatApp/FrontEndReactFiles/src/components/WebSocketComp.js"],"names":["ChatMsgBox","WebSocketComp","getSocket","instanace","constructor","socket","connect","url","WebSocket","onopen","console","log","onmessage","e","update","JSON","parse","data","onclose","msg","disconnect","close","sendMsg","send","stringify","conn"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,cAAvB;;AACA,MAAMC,aAAN,CAAoB;AAGA,SAATC,SAAS,GAAG;AACf,QAAI,CAACD,aAAa,CAACE,SAAnB,EAA6B;AACzBF,MAAAA,aAAa,CAACE,SAAd,GAA0B,IAAIF,aAAJ,EAA1B;AACH;;AACD,WAAOA,aAAa,CAACE,SAArB;AACH;;AAEDC,EAAAA,WAAW,GAAG;AACV,SAAKC,MAAL,GAAc,IAAd;AACH;;AAEDC,EAAAA,OAAO,CAACC,GAAD,EAAK;AACR,SAAKF,MAAL,GAAY,IAAIG,SAAJ,CAAe,+BAA8BD,GAAI,GAAjD,CAAZ;;AAEA,SAAKF,MAAL,CAAYI,MAAZ,GAAmB,MAAI;AAACC,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AAAyC,KAAjE;;AAEA,SAAKN,MAAL,CAAYO,SAAZ,GAAuBC,CAAD,IAAK;AAAC,WAAKC,MAAL,CAAYC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAZ;AAAgC,KAA5D;;AAEA,SAAKZ,MAAL,CAAYa,OAAZ,GAAoB,MAAI;AAACR,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAAwB,KAAjD;AAEH;;AAEDG,EAAAA,MAAM,CAACK,GAAD,EAAK;AACPnB,IAAAA,UAAU,CAACc,MAAX,CAAkBK,GAAG,CAACA,GAAtB;AACH;;AAEDC,EAAAA,UAAU,GAAE;AACR,SAAKf,MAAL,CAAYgB,KAAZ;AACH;;AAEDC,EAAAA,OAAO,CAACH,GAAD,EAAK;AACR,SAAKd,MAAL,CAAYkB,IAAZ,CAAiBR,IAAI,CAACS,SAAL,CAAe;AAAC,aAAML;AAAP,KAAf,CAAjB;AACH;;AAnCe;;AAAdlB,a,CACKE,S,GAAY,I;AAsCvB,MAAMsB,IAAI,GAAGxB,aAAa,CAACC,SAAd,EAAb;AACA,eAAeuB,IAAf","sourcesContent":["import ChatMsgBox from './ChatMsgBox'\r\nclass WebSocketComp {\r\n    static instanace = null;\r\n\r\n    static getSocket (){\r\n        if (!WebSocketComp.instanace){\r\n            WebSocketComp.instanace = new WebSocketComp();\r\n        }\r\n        return WebSocketComp.instanace;\r\n    }\r\n\r\n    constructor() {\r\n        this.socket = null;\r\n    }\r\n\r\n    connect(url){\r\n        this.socket=new WebSocket(`ws://localhost:8000/ws/chat/${url}/`);\r\n\r\n        this.socket.onopen=()=>{console.log(\"Connection established...\")}\r\n\r\n        this.socket.onmessage=(e)=>{this.update(JSON.parse(e.data))}\r\n\r\n        this.socket.onclose=()=>{console.log(\"Byyee...\")}\r\n\r\n    }\r\n\r\n    update(msg){\r\n        ChatMsgBox.update(msg.msg);\r\n    }\r\n\r\n    disconnect(){\r\n        this.socket.close();\r\n    }\r\n\r\n    sendMsg(msg){\r\n        this.socket.send(JSON.stringify({'msg':msg}));\r\n    }\r\n\r\n}\r\n\r\nconst conn = WebSocketComp.getSocket();\r\nexport default conn;"]},"metadata":{},"sourceType":"module"}